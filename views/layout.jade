doctype html
html
  block vars
  head
    meta(charset='utf-8')
    title= title
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    link(rel='stylesheet', href='http://c.weihub.com/css/style-built.css?bust=style.294b6')
    if styles
      each style in styles
        link(rel='stylesheet', href='http://c.weihub.com/css/'+style)
    // HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries
    != '<!--[if lt IE 9]>'
    != '<script src="http://c.weihub.com/js/html5shiv.js"></script>'
    != '<script src="http://c.weihub.com/js/respond.min.js"></script>'
    != '<![endif]-->'
  body
    .wrapper
      header.navbar.navbar-default.navbar-static-top(role='banner')
        .container
          .navbar-header
            button.navbar-toggle(type='button', data-toggle='collapse', data-target='.navbar-collapse')
              span.sr-only 切换导航
              span.icon-bar
              span.icon-bar
              span.icon-bar
            a.navbar-brand(href='/') WeiHub
          .navbar-collapse.collapse(role='navigation')
            ul.nav.navbar-nav
              li(class=nav === 'article' ? 'active' : '')
                a(href='/article')
                  span.glyphicon.glyphicon-list-alt
                  span.hidden-xxs
                    |  文章
            //- form.navbar-form.navbar-left(action='http://www.google.com.hk/search', method='get', role='search')
            //-   .form-group
            //-     input.form-control(type='search', name='q', autocapitalize='off', autocomplete='off', spellcheck='false', placeholder='搜索')
            ul.nav.navbar-nav.navbar-right
              if user
                li
                  a
                    span.glyphicon.glyphicon-user
                    |  
                    = user.fullname
                li
                  a#top-sign-out(href='/signout')
                    span.glyphicon.glyphicon-log-out
                    span.hidden-xxs
                      |  退出
              else 
                li(class=nav === 'auth' ? 'active' : '')
                  a#top-sign-in(href='/auth')
                    span.glyphicon.glyphicon-log-in
                    span.hidden-xxs
                      |  登录
      block content
    .footer
      .container
        footer
          .pull-left
            | &copy; WeiHub
            small.text-code.hidden-xs  [ˈweɪ·hʌb]
            a(href='http://weibo.com/wangshenwei') 微博
            a(href='https://github.com/weareoutman') GitHub
            a(href='http://instagram.com/weareoutman') Instagram
          .pull-right.hidden-xs
            a(href='http://www.miibeian.gov.cn/', target='_blank') 粤ICP备12079626号
    script(src='http://c.weihub.com/js/require.js')
    script
      include ../public/js/config.js
    script.
      require.config({
        baseUrl: 'http://c.weihub.com/js/',
        urlArgs: 'bust=main.8c80e',
        paths: {
          main: 'main-built'
        }
      });
      require(['main']);
    if !DEV
      script.
        // Google analytics
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-48261249-1', 'weihub.com');
        ga('send', 'pageview');
    if scripts
      each script,i in scripts
        script(src=script)
    block inlineScript
